<!DOCTYPE html>
<html>
  <head>
    <title>3DMol.js Flask App</title>
    <script src="https://3dmol.csb.pitt.edu/build/3Dmol-min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <div id="molViewer" style="width: 100%; height: 800px;"></div>
    <script>
      // Load the molecule data from the server
      $.getJSON('/moldata', function(data) {
        // Create a new viewer object
        var viewer = $3Dmol.createViewer($('#molViewer'), {defaultcolors: $3Dmol.rasmolElementColors});
        
        console.log(data.moldata)

        // Add the molecule data to the viewer
        viewer.addModel(data.moldata, 'sdf');
        
        // Zoom and center the molecule
        viewer.zoomTo();
        
        // Enable editing and moving of the molecule
        viewer.setStyle({stick:{radius:0.2}});
        
        viewer.setClickable({},true,function(atom,viewer,event,container) {
            console.log(atom);
            viewer.render();
        });
        // Render the molecule
        viewer.render();
      });
    </script>
  </body>
</html>

